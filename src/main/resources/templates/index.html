<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</title>
  <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
</head>
<body>
<h1>ğŸŒŸ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ (Thymeleaf)</h1>

<!-- âœ… ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ -->
<h2>
  <a href="#" onclick="kakaoLogin(); return false;">ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸</a>
</h2>

<!-- âœ… ë„¤ì´ë²„ ë¡œê·¸ì¸ -->
<h2>
  <a th:href="'https://nid.naver.com/oauth2.0/authorize?response_type=code&client_id=' + ${naverClientId} + '&redirect_uri=' + ${naverRedirectUri} + '&state=naver1234'">
    ë„¤ì´ë²„ ë¡œê·¸ì¸
  </a>
</h2>

<!-- âœ… êµ¬ê¸€ ë¡œê·¸ì¸ -->
<h2>
  <a href="#" onclick="googleLogin(); return false;">êµ¬ê¸€ ë¡œê·¸ì¸</a>
</h2>

<!-- âœ… ìŠ¤í¬ë¦½íŠ¸ë“¤ì€ ë§ˆì§€ë§‰ì— ìœ„ì¹˜ -->
<script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
<script src="https://static.nid.naver.com/js/naveridlogin.js"></script>

<script th:inline="javascript">
  // ì¹´ì¹´ì˜¤
  Kakao.init([[${kakaoApiKey}]]); // âœ… ìˆ˜ì •ë¨
  function kakaoLogin() {
    Kakao.Auth.authorize({
      redirectUri: [[${kakaoRedirectUri}]], // âœ… ì´ê²ƒë„ ìˆ˜ì •
      scope: "profile_nickname, profile_image"
    });
  }

  // ë„¤ì´ë²„
  var naverLogin = new naver.LoginWithNaverId({
    clientId: [[${naverClientId}]],        // âœ… ë¬¸ìì—´ì€ ëª¨ë‘ ''ë¡œ ê°ì‹¸ê¸°
    callbackUrl: [[${naverRedirectUri}]],
    isPopup: false,
    loginButton: { color: "green", type: 3, height: 40 }
  });
  naverLogin.init();

  // êµ¬ê¸€
  function googleLogin() {
    const clientId = [[${googleClientId}]];
    const redirectUri = [[${googleRedirectUri}]];
    const scope = 'profile email';
    const responseType = 'code';
    const oauthUrl =
            `https://accounts.google.com/o/oauth2/v2/auth?` +
            `client_id=${clientId}` +
            `&redirect_uri=${redirectUri}` +
            `&response_type=${responseType}` +
            `&scope=${scope}` +
            `&access_type=offline` +
            `&prompt=consent`;
    window.location.href = oauthUrl;
  }
</script>
</body>
</html>