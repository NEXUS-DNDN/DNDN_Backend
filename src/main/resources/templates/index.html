<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>로그인 테스트</title>
  <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
</head>
<body>
<h1>🌟 로그인 테스트 페이지 (Thymeleaf)</h1>

<!-- ✅ 카카오 로그인 -->
<h2>
  <a href="#" onclick="kakaoLogin(); return false;">카카오 로그인</a>
</h2>

<!-- ✅ 네이버 로그인 -->
<h2>
  <a th:href="'https://nid.naver.com/oauth2.0/authorize?response_type=code&client_id=' + ${naverClientId} + '&redirect_uri=' + ${naverRedirectUri} + '&state=naver1234'">
    네이버 로그인
  </a>
</h2>

<!-- ✅ 구글 로그인 -->
<h2>
  <a href="#" onclick="googleLogin(); return false;">구글 로그인</a>
</h2>

<!-- ✅ 스크립트들은 마지막에 위치 -->
<script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
<script src="https://static.nid.naver.com/js/naveridlogin.js"></script>

<script th:inline="javascript">
  // 카카오
  Kakao.init([[${kakaoApiKey}]]); // ✅ 수정됨
  function kakaoLogin() {
    Kakao.Auth.authorize({
      redirectUri: [[${kakaoRedirectUri}]], // ✅ 이것도 수정
      scope: "profile_nickname, profile_image"
    });
  }

  // 네이버
  var naverLogin = new naver.LoginWithNaverId({
    clientId: [[${naverClientId}]],        // ✅ 문자열은 모두 ''로 감싸기
    callbackUrl: [[${naverRedirectUri}]],
    isPopup: false,
    loginButton: { color: "green", type: 3, height: 40 }
  });
  naverLogin.init();

  // 구글
  function googleLogin() {
    const clientId = [[${googleClientId}]];
    const redirectUri = [[${googleRedirectUri}]];
    const scope = 'profile email';
    const responseType = 'code';
    const oauthUrl =
            `https://accounts.google.com/o/oauth2/v2/auth?` +
            `client_id=${clientId}` +
            `&redirect_uri=${redirectUri}` +
            `&response_type=${responseType}` +
            `&scope=${scope}` +
            `&access_type=offline` +
            `&prompt=consent`;
    window.location.href = oauthUrl;
  }
</script>
</body>
</html>